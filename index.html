<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
      
    <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
      
    <script>
        var myJson = [
  ["MI","US-MI",2,3,6,0.110168182,0.067187273,0.058686364,0.183536364,0.060915455,0.121347273,0.080974545,0.317183636  ],
  ["CA","US-CA",0,3,2,0.1728,0.15722,0.170842,0.052852,0.1005,0.089166,0.149364,0.107254  ],
  ["IN","US-IN",1,0,1,0.02344,0.01547,0.2259,0.014345,0.06111,0.48913,0.06926,0.10134  ],
  ["NV","US-NV",0,1,0,0.00583,0.11124,0.02449,0.23717,0.00583,0.28288,0.19986,0.1327  ],
  ["NE","US-NE",0,0,1,0.12265,0.10476,0.23752,0.19327,0.19044,0.0153,0.02566,0.1104  ],
  ["IA","US-IA",1,1,0,0.015705,0.15861,0.130985,0.00866,0.310295,0.135995,0.096855,0.142885  ],
  ["TX","US-TX",2,3,2,0.108311429,0.196604286,0.13983,0.053967143,0.128191429,0.073401429,0.170624286,0.12907  ],
  ["LA","US-LA",0,0,2,0.18119,0.034365,0.21434,0.15965,0.03844,0.08652,0.20122,0.08428  ],
  ["OR","US-OR",2,1,2,0.16584,0.07005,0.200046,0.08618,0.13904,0.138226,0.116858,0.08376  ],
  ["KS","US-KS",1,0,1,0.016755,0.08245,0.103375,0.213665,0.00967,0.356325,0.045565,0.17219  ],
  ["MD","US-MD",1,0,0,0.02612,0.18968,0.01087,0.18931,0.05734,0.03355,0.13764,0.35548  ],
  ["MA","US-MA",2,0,2,0.1383025,0.1222475,0.12363,0.187205,0.108425,0.0155075,0.163415,0.14126  ],
  ["NY","US-NY",0,2,1,0.206423333,0.08776,0.224183333,0.06963,0.1198,0.101953333,0.080406667,0.109843333  ],
  ["FL","US-FL",2,0,1,0.064233333,0.250356667,0.087033333,0.07531,0.331936667,0.042873333,0.064236667,0.084016667  ],
  ["PA","US-PA",2,2,1,0.213862,0.137658,0.116656,0.042842,0.102552,0.116046,0.131182,0.139206  ],
  ["GA","US-GA",3,2,2,0.258592857,0.03477,0.155501429,0.091081429,0.101575714,0.081775714,0.106847143,0.169855714  ],
  ["OH","US-OH",0,1,1,0.073225,0.457975,0.19917,0.025555,0.02863,0.030765,0.05076,0.133925  ],
  ["VA","US-VA",1,0,3,0.1372,0.111915,0.047915,0.17762,0.1252575,0.0346425,0.129945,0.2355025  ],
  ["NJ","US-NJ",0,2,1,0.088353333,0.050473333,0.09598,0.092726667,0.141243333,0.066853333,0.259593333,0.20478  ],
  ["MO","US-MO",0,2,0,0.15272,0.18746,0.095475,0.03314,0.06963,0.09461,0.075055,0.29191  ],
  ["AL","US-AL",0,0,1,0.20491,0.06192,0.19463,0.05257,0.08902,0.13388,0.00584,0.25724  ],
  ["IL","US-IL",0,2,1,0.09564,0.11638,0.077823333,0.085196667,0.199863333,0.141673333,0.097723333,0.185696667  ],
  ["UT","US-UT",0,1,1,0.17259,0.010665,0.34143,0.114165,0.069255,0.090735,0.075955,0.12521  ],
  ["MN","US-MN",0,1,1,0.028185,0.19,0.170925,0.111785,0.10984,0.086935,0.25261,0.049705  ],
  ["CT","US-CT",0,1,0,0.29089,0.25724,0.1507,0.07126,0.05164,0.00584,0.06285,0.10958  ],
  ["CO","US-CO",2,2,0,0.0879,0.111585,0.19342,0.1815625,0.0570175,0.086055,0.080975,0.2014925  ],
  ["NM","US-NM",0,1,0,0.00596,0.08508,0.43494,0.06125,0.2357,0.00691,0.00691,0.16325  ],
  ["WA","US-WA",0,1,0,0.00582,0.09529,0.42894,0.06827,0.0431,0.19222,0.03844,0.12791  ]
];
        
        var data_array = [];
        
        function get_data(value){
        data_array = [];
        var title = ['State','Stats'];
        data_array.push(title);
    
        for(var i=0; i<myJson.length; i++){
            if(value=="neutral"){
                var entry = [myJson[i][1],myJson[i][2]];
                data_array.push(entry);
                console.log(data_array);
            }else if(value=="positive"){
                var entry = [myJson[i][1],myJson[i][3]];
                data_array.push(entry);
                console.log(data_array);
            }else if(value=="negative"){
                var entry = [myJson[i][1],myJson[i][4]];
                data_array.push(entry);
                console.log(data_array);
            }else{
                var entry = [myJson[i][1],myJson[i][2]];
                data_array.push(entry);
                console.log(data_array);
            }
            
        }
            drawRegionsMap();
  } 
        
    </script>
      
      <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {
        'packages':['geochart'],
        // Note: you will need to get a mapsApiKey for your project.
        // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
        'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
      });
      google.charts.setOnLoadCallback(drawRegionsMap);
      
      
      function drawRegionsMap() {
      //get_data();
      
      console.log(data_array);
        var data = google.visualization.arrayToDataTable(data_array);

        var options = {region: "US", resolution: "provinces", width: "100%", height: "auto",colorAxis: {colors: ['#4ABDAC', '#DFDCE3', '#BD6B4A']},
          backgroundColor: 'transparent',
          datalessRegionColor: '#f5f5f5',
          defaultColor: '#f5f5f5',};

        var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));
          
        google.visualization.events.addListener(chart, 'select', function () {
      for (var i = 0; i < data.getNumberOfRows(); i++) {
        if (i === chart.getSelection()[0].row) {
          //data.setValue(i, 1, 100);
            console.log(data.getValue(i,0));
            document.getElementById("message").innerHTML = data.getValue(i,0);
            document.getElementById("value").innerHTML = data.getValue(i,1);
        } else {
          //data.setValue(i, 1, 0);
            //console.log(data.getValue(i,0));
        }
      }
      chart.draw(data, options);
    });

        chart.draw(data, options);
      }
    </script>
      
    <script type="text/javascript">
      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Sentiment', 'Count'],
          ['Positive',     11],
          ['Negative',      20],
        ]);

        var options = {
            width: "100%",
          pieHole: 0.4,
          fontSize: 14,
            legend: 'bottom',
            pieSliceTextStyle: {
            color: 'black',
          }
        };

        var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
        chart.draw(data, options);
      }
    </script>
      
      <script type="text/javascript">
      google.charts.load('current', {'packages':['treemap']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Location', 'Parent', 'Market trade volume (size)', 'Market increase/decrease (color)'],
          ['Global',    null,                 0,                               0],
          ['America',   'Global',             0,                               0],
          ['Europe',    'Global',             0,                               0],
          ['Asia',      'Global',             0,                               0],
          ['Australia', 'Global',             0,                               0],
          ['Africa',    'Global',             0,                               0],
          ['Brazil',    'America',            11,                              10],
          ['USA',       'America',            52,                              31],
          ['Mexico',    'America',            24,                              12],
          ['Canada',    'America',            16,                              -23],
          ['France',    'Europe',             42,                              -11],
          ['Germany',   'Europe',             31,                              -2],
          ['Sweden',    'Europe',             22,                              -13],
          ['Italy',     'Europe',             17,                              4],
          ['UK',        'Europe',             21,                              -5],
          ['China',     'Asia',               36,                              4],
          ['Japan',     'Asia',               20,                              -12],
          ['India',     'Asia',               40,                              63],
          ['Laos',      'Asia',               4,                               34],
          ['Mongolia',  'Asia',               1,                               -5],
          ['Israel',    'Asia',               12,                              24],
          ['Iran',      'Asia',               18,                              13],
          ['Pakistan',  'Asia',               11,                              -52],
          ['Egypt',     'Africa',             21,                              0],
          ['S. Africa', 'Africa',             30,                              43],
          ['Sudan',     'Africa',             12,                              2],
          ['Congo',     'Africa',             10,                              12],
          ['Zaire',     'Africa',             8,                               10]
        ]);

        tree = new google.visualization.TreeMap(document.getElementById('topicchart'));

        tree.draw(data, {
          minColor: '#4ABDAC',
          midColor: '#DFDCE3',
          maxColor: '#BD6B4A',
          headerHeight: 15,
          fontColor: 'black',
          showScale: true
        });

      }
    </script>

    <title>Race Card Exploration</title>
  </head>
  <body>
    <div class="container-fluid">
        <div class="row" style="height:5vh;">
            <div class="col bg-dark text-white">
                <nav class="d-flex">
                    <div>Logo</div>
                    <div class="ml-auto">Nav</div>
                </nav>
            </div>
        </div>
        <div class="row" style="height:95vh;">
            <div class="col-8" style="background-color:#DFDCE3;">
                <!-- Example single danger button -->
                <div class="btn-group" style="left: calc(50% - 45px);">
                  <button id="button_sentiment" type="button" class="btn btn-secondary dropdown-toggle mt-3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Sentiment
                  </button>
                  <div class="dropdown-menu">
                    <a id="item_neutral" class="dropdown-item" href="#">Neutral</a>
                    <a id="item_positive" class="dropdown-item" href="#">Positive</a>
                    <a id="item_negative" class="dropdown-item" href="#">Negative</a>
                  </div>
                </div>
                <div id="regions_div" style="width: 100%; height: auto;"></div>
                <p class="d-inline mt-3">Console: </p>
                <p class="d-inline" id="message"></p>
                <p class="d-inline" id="value"></p>
            </div>
            <div class="col-4 h-100" style="overflow-y:scroll;">
                <h3>Race Card Exploration</h3>
                <p>An interactive dashboard to illustrate posts about race. Visit the full project here: https://theracecardproject.com/</p>
                <h3 class="mt-3">Analytics</h3>
                <h5 class="mt-2">Sentiment</h5>
                <div id="donutchart" style="width: 100%; height: auto;"></div>
                <h5 class="mt-2">Topic</h5>
                <div id="topicchart" style="width: 100%; height: auto;"></div>
                <h5 class="mt-2">Wordcloud (Topic)</h5>
                <p style="text-align:justify;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer dapibus at dui ac finibus. In convallis urna vitae mauris sodales, vitae mollis mauris scelerisque. Donec in tellus sed ipsum dignissim finibus sit amet eu turpis. Mauris vulputate, tortor tristique consequat commodo, massa dolor varius tellus, hendrerit laoreet felis urna at turpis. Phasellus velit elit, tincidunt vel venenatis a, euismod nec eros. Duis ut tincidunt justo. Maecenas suscipit pretium ex, nec elementum mauris ultricies nec. Suspendisse potenti.</p>
            </div>
        </div>
        
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script>
        var item_neutral = document.getElementById("item_neutral");
        var item_positive = document.getElementById("item_positive");
        var item_negative = document.getElementById("item_negative");
        console.log(item_neutral);
        item_neutral.addEventListener("click",function(){
            get_data("neutral");
            document.getElementById("button_sentiment").innerHTML = "Neutral";
            console.log("neutral click");
        });
        item_positive.addEventListener("click",function(){
            get_data("positive");
                        document.getElementById("button_sentiment").innerHTML = "Positive";

        });
        item_negative.addEventListener("click",function(){
            get_data("negative");
                        document.getElementById("button_sentiment").innerHTML = "Negative";

        });
        
        get_data("neutral");
    </script>
    
  </body>
</html>